{"ast":null,"code":"import api from '../services/api'; //Importa o serviço API para fazer requisições\n\nexport default {\n  props: ['bookToEdit'],\n  data() {\n    return {\n      book: this.bookToEdit || {\n        title: '',\n        author: '',\n        year: null,\n        isbn: '',\n        image: null,\n        editora: '',\n        sinopse: ''\n      },\n      selectedImage: null //Guardar a imagem selecionada \n    };\n  },\n  watch: {\n    bookToEdit: {\n      immediate: true,\n      handler(newVal) {\n        this.book = newVal || {\n          title: '',\n          author: '',\n          year: null,\n          isbn: '',\n          image: null,\n          editora: '',\n          sinopse: ''\n        }; // Atualiza os dados quando a prop mudar\n      }\n    }\n  },\n  methods: {\n    handleFileChange(event) {\n      // Armazena o arquivo da imagem selecionada\n      this.selectedImage = event.target.files[0];\n    },\n    //Função para enviar o formulário\n    handleSubmit() {\n      console.log(\"Conteúdo de selectedImage:\", this.selectedImage); // <-- ADICIONE AQUI\n      const formData = new FormData();\n      formData.append('title', this.book.title);\n      formData.append('author', this.book.author);\n      formData.append('year', this.book.year);\n      formData.append('isbn', this.book.isbn);\n      formData.append('editora', this.book.publisher);\n      formData.append('synopsis', this.book.synopsis);\n      if (this.book._id) {\n        api.updateBook(this.book._id, this.book).then(() => {\n          this.$emit('book-updated'); //Emite um evento quando o livro é atualizado\n        });\n      } else {\n        api.addBook(this.book).then(() => {\n          this.$emit('book-added'); //Emite um evento quando um novo livro é add\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","props","data","book","bookToEdit","title","author","year","isbn","image","editora","sinopse","selectedImage","watch","immediate","handler","newVal","methods","handleFileChange","event","target","files","handleSubmit","console","log","formData","FormData","append","publisher","synopsis","_id","updateBook","then","$emit","addBook"],"sources":["C:\\Users\\dsadm\\Pictures\\@AgoraVai\\-SITEBiblioteca\\frontend\\loginfrontend\\src\\components\\BookForm.vue"],"sourcesContent":["<template>\r\n<form @submit.prevent=\"handleSubmit\">\r\n    <input v-model=\"book.title\" placeholder=\"Título\" required/>\r\n    <input v-model=\"book.author\" placeholder=\"Autor\" required/>\r\n    <input v-model=\"book.year\" placeholder=\"Ano\" required/>\r\n    <input v-model=\"book.isbn\" placeholder=\"ISBN\" required/>\r\n    <input type=\"book.image\" @change=\"handleFileChange\"/>\r\n    <input v-model=\"book.editora\" placeholder=\"Editora\" required/>\r\n    <input v-model=\"book.sinopse\" placeholder=\"Sinopse\" required/>\r\n\r\n\r\n<button type=\"submit\">{{ book._id ? 'Atualizar' : 'Adicionar' }}</button>\r\n</form>\r\n</template>\r\n\r\n<script>\r\nimport api from '../services/api'; //Importa o serviço API para fazer requisições\r\n\r\nexport default{\r\n    props: ['bookToEdit'],\r\n    data() {\r\n    return {\r\n        book: this.bookToEdit || { title: '', author: '', year: null, isbn: '', image:null, editora: '', sinopse: ''},\r\n        selectedImage: null, //Guardar a imagem selecionada \r\n    };\r\n},\r\nwatch: {\r\n    bookToEdit: {\r\n      immediate: true,\r\n      handler(newVal) {\r\n        this.book = newVal || { title: '', author: '', year: null, isbn: '', image:null, editora: '', sinopse: ''}; // Atualiza os dados quando a prop mudar\r\n      },\r\n    },\r\n  },\r\n    methods: {\r\n      handleFileChange(event) {\r\n      // Armazena o arquivo da imagem selecionada\r\n      this.selectedImage = event.target.files[0];\r\n    },\r\n        //Função para enviar o formulário\r\n        handleSubmit(){\r\n          console.log(\"Conteúdo de selectedImage:\", this.selectedImage); // <-- ADICIONE AQUI\r\n      const formData = new FormData();\r\n      formData.append('title', this.book.title);\r\n      formData.append('author', this.book.author);\r\n      formData.append('year', this.book.year);\r\n      formData.append('isbn', this.book.isbn);\r\n      formData.append('editora', this.book.publisher);\r\n      formData.append('synopsis', this.book.synopsis);\r\n          if (this.book._id) {\r\n            api.updateBook(this.book._id, this.book).then(()=>{\r\n                this.$emit('book-updated'); //Emite um evento quando o livro é atualizado\r\n            });    \r\n            } else {\r\n            api.addBook(this.book).then(()=>{\r\n              this.$emit('book-added'); //Emite um evento quando um novo livro é add\r\n            });\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>"],"mappings":"AAgBA,OAAOA,GAAE,MAAO,iBAAiB,EAAE;;AAEnC,eAAc;EACVC,KAAK,EAAE,CAAC,YAAY,CAAC;EACrBC,IAAIA,CAAA,EAAG;IACP,OAAO;MACHC,IAAI,EAAE,IAAI,CAACC,UAAS,IAAK;QAAEC,KAAK,EAAE,EAAE;QAAEC,MAAM,EAAE,EAAE;QAAEC,IAAI,EAAE,IAAI;QAAEC,IAAI,EAAE,EAAE;QAAEC,KAAK,EAAC,IAAI;QAAEC,OAAO,EAAE,EAAE;QAAEC,OAAO,EAAE;MAAE,CAAC;MAC7GC,aAAa,EAAE,IAAI,CAAE;IACzB,CAAC;EACL,CAAC;EACDC,KAAK,EAAE;IACHT,UAAU,EAAE;MACVU,SAAS,EAAE,IAAI;MACfC,OAAOA,CAACC,MAAM,EAAE;QACd,IAAI,CAACb,IAAG,GAAIa,MAAK,IAAK;UAAEX,KAAK,EAAE,EAAE;UAAEC,MAAM,EAAE,EAAE;UAAEC,IAAI,EAAE,IAAI;UAAEC,IAAI,EAAE,EAAE;UAAEC,KAAK,EAAC,IAAI;UAAEC,OAAO,EAAE,EAAE;UAAEC,OAAO,EAAE;QAAE,CAAC,EAAE;MAC9G;IACF;EACF,CAAC;EACCM,OAAO,EAAE;IACPC,gBAAgBA,CAACC,KAAK,EAAE;MACxB;MACA,IAAI,CAACP,aAAY,GAAIO,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC5C,CAAC;IACG;IACAC,YAAYA,CAAA,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAACZ,aAAa,CAAC,EAAE;MACnE,MAAMa,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACxB,IAAI,CAACE,KAAK,CAAC;MACzCoB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,IAAI,CAACxB,IAAI,CAACG,MAAM,CAAC;MAC3CmB,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACxB,IAAI,CAACI,IAAI,CAAC;MACvCkB,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACxB,IAAI,CAACK,IAAI,CAAC;MACvCiB,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAACxB,IAAI,CAACyB,SAAS,CAAC;MAC/CH,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,IAAI,CAACxB,IAAI,CAAC0B,QAAQ,CAAC;MAC3C,IAAI,IAAI,CAAC1B,IAAI,CAAC2B,GAAG,EAAE;QACjB9B,GAAG,CAAC+B,UAAU,CAAC,IAAI,CAAC5B,IAAI,CAAC2B,GAAG,EAAE,IAAI,CAAC3B,IAAI,CAAC,CAAC6B,IAAI,CAAC,MAAI;UAC9C,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC,EAAE;QAChC,CAAC,CAAC;MACF,OAAO;QACPjC,GAAG,CAACkC,OAAO,CAAC,IAAI,CAAC/B,IAAI,CAAC,CAAC6B,IAAI,CAAC,MAAI;UAC9B,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,EAAE;QAC5B,CAAC,CAAC;MACF;IACJ;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}